"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8892],{5318:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var i=n(7378);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},s="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),s=c(n),h=o,d=s["".concat(l,".").concat(h)]||s[h]||m[h]||a;return n?i.createElement(d,r(r({ref:t},u),{},{components:n})):i.createElement(d,r({ref:t},u))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,r=new Array(a);r[0]=h;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[s]="string"==typeof e?e:o,r[1]=p;for(var c=2;c<a;c++)r[c]=n[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},7784:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>m,frontMatter:()=>a,metadata:()=>p,toc:()=>c});var i=n(5773),o=(n(7378),n(5318));const a={sidebar_position:60},r="Executing a recipe",p={unversionedId:"executing-a-recipe",id:"executing-a-recipe",title:"Executing a recipe",description:"A recipe can either be executed from the command line or a script. Execution of a recipe for the command line in a terminal window is to execute a single recipe and all the required options must be specified manually. Execution of a recipe from a script can be used to configure (part of) the options in the script. There is however a way more interesting case of using scripts. With a script, it is possible to automate the execution of multiple recipes, and let one recipe use the output of another recipe! With scripts, you can cook yourself a complete meal!",source:"@site/docs/executing-a-recipe.md",sourceDirName:".",slug:"/executing-a-recipe",permalink:"/ai-writer/docs/executing-a-recipe",draft:!1,editUrl:"https://github.com/svdoever/ai-writer/tree/main/docs/docs/executing-a-recipe.md",tags:[],version:"current",sidebarPosition:60,frontMatter:{sidebar_position:60},sidebar:"docSidebar",previous:{title:"getData.js",permalink:"/ai-writer/docs/recipe-ingredients/getData.js"},next:{title:"Tutorial - eli5 recipe",permalink:"/ai-writer/docs/category/tutorial---eli5-recipe"}},l={},c=[{value:"Available recipes in the project",id:"available-recipes-in-the-project",level:2},{value:"Get help with a recipe",id:"get-help-with-a-recipe",level:2},{value:"The output of a recipe",id:"the-output-of-a-recipe",level:2},{value:"See the recipe output in the CLI",id:"see-the-recipe-output-in-the-cli",level:2},{value:"Dry-run a recipe",id:"dry-run-a-recipe",level:2},{value:"Overriding the model configuration",id:"overriding-the-model-configuration",level:2},{value:"Verbose and debug output",id:"verbose-and-debug-output",level:2},{value:"Executing a recipe from a script",id:"executing-a-recipe-from-a-script",level:2}],u={toc:c},s="wrapper";function m(e){let{components:t,...a}=e;return(0,o.kt)(s,(0,i.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"executing-a-recipe"},"Executing a recipe"),(0,o.kt)("p",null,"A recipe can either be executed from the command line or a script. Execution of a recipe for the command line in a ",(0,o.kt)("a",{parentName:"p",href:"./terminal-window"},"terminal window")," is to execute a single recipe and all the required options must be specified manually. Execution of a recipe from a script can be used to configure (part of) the options in the script. There is however a way more interesting case of using scripts. With a script, it is possible to automate the execution of multiple recipes, and let one recipe use the output of another recipe! With scripts, you can cook yourself a complete meal!"),(0,o.kt)("p",null,"The simplest way is to execute a recipe from the command line. For example, to execute the ",(0,o.kt)("inlineCode",{parentName:"p"},"eli5")," recipe, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx ai-writer eli5 --topic elephant --output eli5/elephant\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"npx")," command is used to execute the ",(0,o.kt)("inlineCode",{parentName:"p"},"ai-writer")," command. The ",(0,o.kt)("inlineCode",{parentName:"p"},"ai-writer")," command is used to execute a recipe. The ",(0,o.kt)("inlineCode",{parentName:"p"},"eli5")," recipe is executed with the ",(0,o.kt)("inlineCode",{parentName:"p"},"--topic")," option to specify the topic of the recipe. The ",(0,o.kt)("inlineCode",{parentName:"p"},"--output")," option is used to specify the output file of the recipe."),(0,o.kt)("h2",{id:"available-recipes-in-the-project"},"Available recipes in the project"),(0,o.kt)("p",null,"To see all available recipes in your project, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx ai-writer\n")),(0,o.kt)("h2",{id:"get-help-with-a-recipe"},"Get help with a recipe"),(0,o.kt)("p",null,"To get help on a recipe, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx ai-writer <recipe> --help\n")),(0,o.kt)("h2",{id:"the-output-of-a-recipe"},"The output of a recipe"),(0,o.kt)("p",null,"To specify the output of a recipe, use the mandatory ",(0,o.kt)("inlineCode",{parentName:"p"},"--output")," option. The ",(0,o.kt)("inlineCode",{parentName:"p"},"--output")," option can be used to specify the output file. This file will not contain the extension, and the path is relative to the storage folder. For example, to specify the output of the ",(0,o.kt)("inlineCode",{parentName:"p"},"eli5")," recipe, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx ai-writer eli5 --topic elephant --output eli5/elephant\n")),(0,o.kt)("p",null,"The extension will be ",(0,o.kt)("inlineCode",{parentName:"p"},".txt")," by default but can be overridden using the ",(0,o.kt)("inlineCode",{parentName:"p"},"--output-format")," option. For example, to specify the output of the ",(0,o.kt)("inlineCode",{parentName:"p"},"eli5")," recipe as a Markdown file, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx ai-writer eli5 --topic elephant --output eli5/elephant --output-format md\n")),(0,o.kt)("p",null,"In that case the output file will be ",(0,o.kt)("inlineCode",{parentName:"p"},"eli5/elephant.md"),". Supported output formats must be defined in the ",(0,o.kt)("inlineCode",{parentName:"p"},"output-formats.json")," file. See the ",(0,o.kt)("a",{parentName:"p",href:"./output-formats.json"},"output-formats.json")," page for more information."),(0,o.kt)("h2",{id:"see-the-recipe-output-in-the-cli"},"See the recipe output in the CLI"),(0,o.kt)("p",null,"To see the output of a recipe in the CLI, use the ",(0,o.kt)("inlineCode",{parentName:"p"},"--show-output")," option. For example, to see the output of the ",(0,o.kt)("inlineCode",{parentName:"p"},"eli5")," recipe in the CLI, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx ai-writer eli5 --topic elephant --output eli5/elephant --show-output\n")),(0,o.kt)("p",null,"This will show the wrapped output of the recipe in the CLI, and will also write the output to a file."),(0,o.kt)("h2",{id:"dry-run-a-recipe"},"Dry-run a recipe"),(0,o.kt)("p",null,"Execution of a recipe makes a call to the OpenAI API, which costs money and takes time. To prevent this, use the ",(0,o.kt)("inlineCode",{parentName:"p"},"--dry-run")," option. For example, to dry-run the ",(0,o.kt)("inlineCode",{parentName:"p"},"eli5")," recipe, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx ai-writer eli5 --topic elephant --output eli5/elephant --show-output --dry-run\n")),(0,o.kt)("p",null,"This option is very useful during the development of the perfect prompt."),(0,o.kt)("p",null,"Note that the ",(0,o.kt)("inlineCode",{parentName:"p"},"--dry-run")," option automatically enables the ",(0,o.kt)("inlineCode",{parentName:"p"},"--verbose")," option as well for more information."),(0,o.kt)("p",null,"When the ",(0,o.kt)("inlineCode",{parentName:"p"},"--dry-run")," option is used, the output is:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"Dry-run completion on prompt:\n<prompt>\n")),(0,o.kt)("h2",{id:"overriding-the-model-configuration"},"Overriding the model configuration"),(0,o.kt)("p",null,"Part of the ingredients of a recipe is the model configuration in the ",(0,o.kt)("inlineCode",{parentName:"p"},"aiconfig.json")," file, as described in the ",(0,o.kt)("a",{parentName:"p",href:"./recipe-ingredients/aiconfig.json"},"aiconfig.json")," section. The model configuration can be (partially) overridden using the ",(0,o.kt)("inlineCode",{parentName:"p"},"--model-config")," option. For example, to override the model configuration of the ",(0,o.kt)("inlineCode",{parentName:"p"},"eli5")," recipe, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx ai-writer eli5 --topic elephant --output eli5/elephant --model-config gpt-4\n")),(0,o.kt)("p",null,"The available model overrides are defined in the ",(0,o.kt)("inlineCode",{parentName:"p"},"models.json")," file. See the ",(0,o.kt)("a",{parentName:"p",href:"./models.json"},"models.json")," page for more information. This option is very useful for testing out the results of other models (e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"gpt-4")," versus ",(0,o.kt)("inlineCode",{parentName:"p"},"gpt-3.5-turbo")," versus ",(0,o.kt)("inlineCode",{parentName:"p"},"text-davinci-003"),"), but also because Azure OpenAI Service and OpenAI use different model names of the same model."),(0,o.kt)("h2",{id:"verbose-and-debug-output"},"Verbose and debug output"),(0,o.kt)("p",null,"To see what is exactly happening during the execution of a recipe, use the ",(0,o.kt)("inlineCode",{parentName:"p"},"--verbose")," option. For example, to see the verbose output of the ",(0,o.kt)("inlineCode",{parentName:"p"},"eli5")," recipe, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx ai-writer eli5 --topic elephant --output eli5/elephant --verbose\n")),(0,o.kt)("p",null,"The output will show the following:"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(6655).Z,width:"950",height:"1177"})),(0,o.kt)("p",null,"Note the used colors, each color has a meaning as described in ",(0,o.kt)("a",{parentName:"p",href:"./colors"},"Colors"),"."),(0,o.kt)("p",null,"To see even more details, use the ",(0,o.kt)("inlineCode",{parentName:"p"},"--debug")," option. For example, to see the debug output of the ",(0,o.kt)("inlineCode",{parentName:"p"},"eli5")," recipe, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx ai-writer eli5 --topic elephant --output eli5/elephant --debug\n")),(0,o.kt)("p",null,"The debug output will show the verbose output and more."),(0,o.kt)("h2",{id:"executing-a-recipe-from-a-script"},"Executing a recipe from a script"),(0,o.kt)("p",null,"A recipe can also be executed from a script. For example, to execute the ",(0,o.kt)("inlineCode",{parentName:"p"},"eli5")," recipe for an elephant from a script, create the script ",(0,o.kt)("inlineCode",{parentName:"p"},"sample.sh")," on Linux or macOS:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"#!/bin/bash\n\nnpx ai-writer eli5 --topic elephant --output eli5/elephant\n")),(0,o.kt)("p",null,"And execute this script with the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sh ./sample.sh\n")),(0,o.kt)("p",null,"Or ",(0,o.kt)("inlineCode",{parentName:"p"},"sample.bat")," on Windows, with the following content:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cmd"},"npx ai-writer eli5 --topic elephant --output eli5/elephant\n")),(0,o.kt)("p",null,"And execute this script with the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cmd"},"sample.bat\n")),(0,o.kt)("p",null,"Also PowerShell is a powerful scripting language for the execution of recipes, especially because PowerShell scripts can run on Windows, Linux, and macOS. For example, to execute the ",(0,o.kt)("inlineCode",{parentName:"p"},"eli5")," recipe for a collection of topics, create the script ",(0,o.kt)("inlineCode",{parentName:"p"},"sample-multiple.ps1"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-powershell"},'#!/usr/bin/env pwsh\n\n$topics = "elephant", "giraffe", "lion", "tiger", "zebra"\nfor ($i=0; $i -lt $topics.length; $i++) {\n    $topic = $topics[$i]\n    npx ai-writer eli5 --topic $topic --output "eli5/$topic" --dry-run\n}\n')),(0,o.kt)("p",null,"To execute on Linux or macOS, either execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"pwsh ./sample-multiple.ps1\n")),(0,o.kt)("p",null,"Or make the script executable with the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"chmod +x ./sample-multiple.ps1\n")),(0,o.kt)("p",null,"And execute the script with the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./sample-multiple.ps1\n")),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/powershell/scripting/overview"},"PowerShell"),") for more information on PowerShell."),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/powershell/scripting/install/installing-powershell"},"PowerShell Installation")," for more information on how to install PowerShell on Windows, Linux, and macOS."))}m.isMDXComponent=!0},6655:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/r1o26pmc1261-251dc27bbfa9b0bd0a94a8bbee930bb7.png"}}]);